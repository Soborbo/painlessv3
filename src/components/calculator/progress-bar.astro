---
/**
 * PROGRESS BAR
 * 
 * Visual progress indicator for calculator steps
 */

import { CALCULATOR_STEPS } from '@/lib/core/calculator/config';

interface Props {
  currentStep: number;
  className?: string;
}

const { currentStep, className = '' } = Astro.props;

const totalSteps = CALCULATOR_STEPS.length;
const progress = Math.round((currentStep / totalSteps) * 100);
---

<div class={`w-full ${className}`}>
  <!-- Progress bar -->
  <div class="relative h-2 bg-secondary rounded-full overflow-hidden">
    <div
      class="absolute top-0 left-0 h-full bg-primary transition-all duration-500 ease-out"
      style={`width: ${progress}%`}
    />
  </div>

  <!-- Step indicators -->
  <div class="flex justify-between mt-4">
    {
      CALCULATOR_STEPS.map((step) => (
        <div class="flex flex-col items-center">
          <div
            class={`w-8 h-8 rounded-full flex items-center justify-center text-sm font-medium transition-colors ${
              step.order < currentStep
                ? 'bg-primary text-primary-foreground'
                : step.order === currentStep
                  ? 'bg-primary text-primary-foreground ring-4 ring-primary/20'
                  : 'bg-secondary text-muted-foreground'
            }`}
          >
            {step.order}
          </div>
          <span
            class={`text-xs mt-2 hidden sm:block ${
              step.order === currentStep
                ? 'text-foreground font-medium'
                : 'text-muted-foreground'
            }`}
          >
            {step.title.en}
          </span>
        </div>
      ))
    }
  </div>

  <!-- Progress text -->
  <div class="text-center mt-4 text-sm text-muted-foreground">
    Step {currentStep} of {totalSteps} ({progress}%)
  </div>
</div>
